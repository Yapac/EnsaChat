<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.text.*?>

<HBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="clients.gui.ChatController"
      spacing="0"
      prefWidth="1000" prefHeight="650"
      style="-fx-background-color: #f0f2f5;">

    <!-- Main Chat Area -->
    <VBox spacing="10" HBox.hgrow="ALWAYS"
          style="-fx-padding: 10; -fx-background-color: #f9f9fb;">

        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 10 0 0 0;">
            <Label fx:id="userEmailLabel"
                   style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Logout" onAction="#handleLogout"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-background-radius: 10; -fx-font-weight: bold;"/>
        </HBox>

        <Label text="Chat Principal"
               style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #333;"/>

        <!-- Tabbed Chats -->
        <TabPane fx:id="chatTabs" VBox.vgrow="ALWAYS"
                 style="-fx-background-radius: 10;">
            <tabs>
                <Tab text="Global Chat" closable="false">
                    <ListView fx:id="globalMessageList"
                              style="-fx-padding: 10; -fx-background-color: white; -fx-background-radius: 10;"/>
                </Tab>
            </tabs>
        </TabPane>

        <!-- Message input -->
        <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
            <TextField fx:id="inputField" promptText="Ã‰crivez un message..."
                       HBox.hgrow="ALWAYS"
                       style="-fx-font-size: 14px; -fx-background-radius: 20; -fx-border-radius: 20; -fx-padding: 10;" />
            <Button text="ðŸ“Ž" fx:id="fileButton"
                    style="-fx-background-color: #8e44ad; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 20;"/>
            <Button text="Envoyer" fx:id="sendButton" onAction="#handleSend"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-size: 14px;  -fx-font-weight: bold; -fx-background-radius: 20;"/>
        </HBox>
    </VBox>

    <!-- Sidebar for users (now on the right) -->
    <VBox fx:id="userSidebar" spacing="10" prefWidth="230"
          style="-fx-background-color: #ffffff; -fx-border-color: #ddd; -fx-border-width: 0 0 0 1;">
        <Label text="Utilisateurs"
               style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-padding: 10;" />
        <ListView fx:id="userListView" VBox.vgrow="ALWAYS"
                  style="-fx-background-radius: 0; -fx-background-color: transparent;" />
    </VBox>
</HBox>
